---

- name: Create user divera
  user:
    state: present
    name: divera
    uid: 1050
    group: users

# TODO eigenes Playbook fuer name; '*', state: latest (Upgrade all)
# TODO eigenes Playbook fuer autoremove, autoclean (Housekeeping)
- name: Install packages
  apt:
    name: "{{ packages }}"
    state: present
    update_cache: yes
    cache_valid_time: 3600
  vars:
    packages:
    - git
    - python
    - cec-utils

- name: Install pip packages
  pip:
    requirements: "{{ role_path }}/files/requirements.txt"
    executable: pip3

- name: copy conf (FF Bispingen Ortswehr Bispingen)
  template:
    src: divera.ini.j2
    dest: "/home/divera/divera.ini"
    owner: "divera"
    group: "users"
    mode: "0600"
